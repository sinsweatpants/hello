export const Patterns = (() => {
  // ูููุดุฆ ูุฎุชุตุฑ ููู RegExp
  const c = (s: string | RegExp, flags = "") => new RegExp(s as any, flags);

  // โโโ ุซูุงุจุช ูุฑุนูุฉ ูุฅุนุงุฏุฉ ุงูุงุณุชุฎุฏุงู (ูุชูุงููุฉ ูุน ุงููุตููู) โโโ
  // ุงุชุฌุงู (ุฏุงุฎู/ุฎุงุฑุฌ) + ูุคุดุฑุงุช ุฒูู
  const INOUT_PART = String.raw`(?:ุฏุงุฎูู|ุฎุงุฑุฌู|ุฏ\.|ุฎ\.)`;
  const TIME_PART =
    String.raw`(?:ููู|ููุงุฑ|ู\.|ู\.|ุตุจุงุญ|ูุณุงุก|ูุฌุฑ|ุธูุฑ|ุนุตุฑ|ูุบุฑุจ|ุงูุบุฑูุจ|ุงููุฌุฑ)`;

  // ูุฏุนู: (INOUT[-:ุ]?TIME | TIME[-:ุ]?INOUT) ูุน ุงูุณูุงุญ ุจูุณุงูุงุช ูุชุบููุฑุฉ
  const TIME_LOCATION_BOTH =
    String.raw`(?:${INOUT_PART}\s*[-โโ:ุ]?\s*${TIME_PART}|${TIME_PART}\s*[-โโ:ุ]?\s*${INOUT_PART})`;

  // ูููุงุช ุฃูููุฉ ุดุงุฆุนุฉ ูุจุฏุก scene-header-3 (ูุงุจูุฉ ููุชูุณุนุฉ)
  const PLACE_LEXICON =
    String.raw`(?:ูุณุฌุฏ|ุจูุช|ููุฒู|ุฏุงุฑ|ุดูุฉ|ูููุง|ููุชุจ|ูุญู|ุฏูุงู|ูููู|ูุทุนู|ููุฏู|ูุณุชุดูู|ูุฏุฑุณุฉ|ุฌุงูุนุฉ|ูููุฉ|ุดุงุฑุน|ุทุฑูู|ููุฏุงู|ุญุฏููุฉ|ููู|ุจุญุฑ|ุตุญุฑุงุก|ุฌุจู|ูุฑูุฉ|ูุฏููุฉ|ุณูุงุฑุฉ|ุฃุชูุจูุณ|ูุทุงุฑ|ุทุงุฆุฑุฉ|ุจุงุจ|ูุงูุฐุฉ|ุณูู|ุณุทุญ|ุจููููุฉ|ุญูุงู|ูุทุจุฎ|ุตุงูุฉ|ุบุฑูุฉ|ูุงุนุฉ|ููุฑ|ุณุงุญุฉ|ููุจุฑุฉ|ูุฎุจุฒ|ููุชุจุฉ|ููู|ูุตุฑ)`;

  // โโโ ุฃููุงุท ุฃุณุงุณูุฉ โโโ
  return {
    /** ููุท/ุฑููุฒ ูุจู ุฃุณูุงุก ุงูุดุฎุตูุงุช */
    characterBullets: c(
      String.raw`^([โขโโโฆโชโซโโกโผโปโซโช๐ด๐ตโญ]+|[-โโ*+])\s*`
    ),

    /**
     * ุฃุณูุงุก ุงูุดุฎุตูุงุช (ูุณูุญ ุจุจุงุฏุฆุฉ "ุตูุช "ุ ููุน ุฃู ุจุฏูู ููุทุชูู)
     * ูุชูุงูู ูุน ุงููุตููู: ุณุทุฑ ุงุณู ุนุฑุจู 2โ40 ุญุฑููุง ููุณุงูุงุช
     */
    characterNames: c(
      String.raw`^\s*(?:ุตูุช\s+)?[\u0600-\u06FF][\u0600-\u06FF\s]{1,40}\s*:?\s*$`
    ),

    /** ูููุงุช ูุดูุฏ/ููุงู/ุฒูู ุนุงูุฉ (ููุชุญุณูุณ ุงููุจูุฑ ููุท) */
    sceneKeywords: c(
      String.raw`^(ูุดูุฏ|ููุทุฉ|ููุธุฑ|ููุงู|ุฒูู|ููุช|SCENE|LOCATION|TIME)\s*`,
      "i"
    ),

    /** ูุนุฌู ุฃูุงูู ุนุงู (ูููุณุงุนุฏุฉ ูู scene-header-3 ุฃู ุงูู action) */
    locationWords: c(
      String.raw`^${PLACE_LEXICON}`,
      "i"
    ),

    /** ูุคุดุฑุงุช ุฒูู ุนุงูุฉ (ุชูุณุชุฎุฏู ููุฏุนู ููุท) */
    timeIndicators: c(
      String.raw`(ููู|ููุงุฑ|ุตุจุงุญ|ุธูุฑ|ุนุตุฑ|ูุบุฑุจ|ุนุดุงุก|ูุฌุฑ|ุถุญู|ุตูู|ุดุชุงุก|ุฑุจูุน|ุฎุฑูู|ุฃูุณ|ุงูููู|ุบุฏุง|ุงูุขู|ูุงุญูุง|ุจุนุฏูุง|ูุจููุง|morning|night|day|evening)`,
      "i"
    ),

    /** ุฃูุนุงู ุญุฑูุฉ ุดุงุฆุนุฉ ูุจุฏุงูุฉ ุณุทุฑ Action */
    actionKeywords: c(
      String.raw`^(ูุฏุฎู|ูุฎุฑุฌ|ููู|ูุฌูุณ|ููุดู|ูุฌุฑู|ููุธุฑ|ูุจุชุณู|ูุถุญู|ูุจูู|ูุตุฑุฎ|ูููุณ|ูููุฑ|ูุชุฐูุฑ|ุชุฑูุฏ|ุชุจุชุณู|ุชุฑูุน|ุชุฑุจุช|ุชููู|ูุดู|ุชุดู|ุชุถุฑุจ|ูุณุญุจ|ููุชูุช)`,
      "i"
    ),

    /** ุฃู ุณุทุฑ ูุญุงุท ุจุฃููุงุณ (ุณููุญุณู ูุงุญููุง ูุชุฑุฌูุฉ/ุฅุฑุดุงุฏ ูุตูุฑ) */
    directorNotes: c(String.raw`^\s*\(.*?\)\s*$`),

    /** ุงูุชูุงูุงุช (ุนุฑุจูุฉ/ุฅูุฌููุฒูุฉ) */
    transitions: c(
      String.raw`^(?:ูุทุน|ูุทุน\s+ุฅูู|ุงูุชูุงู\s+ุฅูู|ูุฒุฌ|ุฐูุจุงู|ุชูุงุดู|ุชูุงุดู\s+ุฃุณูุฏ|ุฎุงุฑุฌ\s+ุงููุดูุฏ|CUT TO:|FADE IN:|FADE OUT:|DISSOLVE TO:?)\s*$`,
      "i"
    ),

    /**
     * ุณุทุฑ ูุดูุฏ ููุฑููู: ููุชูุท (ุงููููุฉ) (ุงูุฑูู) (ุงูุจุงูู)
     * ูุซุงู: "ูุดูุฏ 12 - ููู-ุฏุงุฎูู โ ูุตุฑ ..." โ ุงูุฑูู=12 ูุงูุจุงูู ููุชูููู
     */
    numberedScene: c(
      String.raw`^(ูุดูุฏ|ููุทุฉ)\s*(\d+)\s*[:๏ผ\-โโ]?\s*(.*)`,
      "i"
    ),

    /**
     * ุงูุจุณููุฉ โ ุดุฑุท ุตุงุฑู ููุง ูู ุงููุตููู
     */
    basmala: c(String.raw`^\s*ุจุณู\s+ุงููู\s+ุงูุฑุญูู\s+ุงูุฑุญูู\s*$`),

    /**
     * sceneHeader1 โ ุณุทุฑ ูุญูู ููุท "ูุดูุฏ + ุฑูู"
     * (ูููุฏ ููุชุนุฑูู ุนูู ุฑุฃุณ ูุดูุฏ ููุตูู ุณุทุฑูุง ููุญุฏู)
     */
    sceneHeader1: c(String.raw`^\s*ูุดูุฏ\s*\d+\s*$/`, "i"),

    /**
     * sceneHeaderPrefix โ ูุทุงุจู ูููุตููู:
     *   ^\s*(?:ูุดูุฏ|ู\.)\s*(\d+)\s*(?:[-โโ:ุ]\s*)?(.*)$
     * ููุชูุท ุงูุฑูู ูุงูุจุงูู (ูุชูููู timeLocation + place)
     */
    sceneHeaderPrefix: c(
      String.raw`^\s*(?:ูุดูุฏ|ู\.)\s*([0-9]+)\s*(?:[-โโ:ุ]\s*)?(.*)$`,
      "i"
    ),

    /**
     * sceneHeader2 (timeLocation) โ ูุฏุนู ุงูุชุฑุชูุจูู ูููุจู ุงูููุงุตู ุงููุฎุชููุฉ
     * ูุงุญููุง ุชูุณููู ุงูุดุฑุทุฉ ุฅูู "-"
     */
    sceneHeader2BothOrders: c(String.raw`${TIME_LOCATION_BOTH}`, "i"),

    /**
     * sceneHeader2: ุชูุณููุงุช ูุฑุนูุฉ (ูุฏ ุชูุณุชุฎุฏู ูู ุงูุชุญูู ุงูุชูุตููู)
     */
    sceneHeader2: {
      time: c(String.raw`${TIME_PART}`, "i"),
      inOut: c(String.raw`${INOUT_PART}`, "i"),
    },

    /**
     * sceneHeader3 โ ุจุฏุงูุฉ ููุงู ุชูุตููู ูุญุชููุฉ
     * (ุบุงูุจูุง ููุณุชููู ุนุจุฑ ุฃุณุทุฑ ูุงุญูุฉ ุญุชู ุนูุตุฑ ุฌุฏูุฏ)
     */
    sceneHeader3: c(String.raw`^${PLACE_LEXICON}`, "i"),

    // โโโ ุฃููุงุณ: ุชุฑุฌูุฉ ุฃู ุฅุฑุดุงุฏ ูุตูุฑุ โโโ

    /**
     * ุดูู ุงูุฃููุงุณ ุงูุนุงู
     */
    parenShaped: c(String.raw`^\s*\(.*?\)\s*$`),

    /**
     * ุชุฑุฌูุฉ ุฏุงุฎู ุฃููุงุณ (dialogue) โ ุฃู ูู:
     * 1) ุงุญุชูุงุก ุนูุงูุงุช ุชุฑููู ุฌูููู (ุ . !)
     * 2) ุทูู > 6 ูููุงุช
     * 3) ูุฌูุฏ ุฃุญุฑู ุบูุฑ ุนุฑุจูุฉ (ูุงุชูููุฉ/ุณุฑูุงููุฉ)
     *
     * ูุณุชุฎุฏู Lookaheads ุนูู ุงููุญุชูู ุฏุงุฎู ุงูุฃููุงุณ.
     */
    parenTranslation: c(
      String.raw`^\s*\((?:(?=.*[\.!\ุ\?])|(?=(?:[^()]*\s+){6,}[^()]*$)|(?=.*[A-Za-z\u0700-\u074F])).*\)\s*$`
    ),

    /**
     * ุฅุฑุดุงุฏ ูุตูุฑ (parenthetical ูุตูุฑ) โค 6 ูููุงุช ูุจุฏูู ุนูุงูุงุช ุฌูููู
     * ูุจุฏุฆููุง ูุนุชูุฏ ุนูู ุบูุงุจ ุนูุงูุงุช ุงูุฌูููู ูุนุฏู ูููุงุช ุชูุฑูุจู (โค6)
     */
    shortParenthetical: c(
      String.raw`^\s*\((?=.{1,60}\)$)(?!.*[\.!\ุ\?])(?:[^()\s]+(?:\s+[^()\s]+){0,5})\)\s*$`
    ),
  };
})();